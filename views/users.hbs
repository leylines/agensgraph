  {{>users-table}}
  {{>users-form mode='update'}}
  <script>
    $(document).ready(function(){
      var url = window.location.href;
      $('.usersTable').DataTable({
        pageLength: 30,
        paging: true,
        dom: 'frtip'
      });
      $(".usersTable tbody").featherlight($(".update-form"), {
        afterOpen: function(event){
          $(".update-form").eq(1).show();
        },
        afterClose: function(event){
          $('.role-update').find('option').attr('selected',false);
        }
      });
      var table = $(".usersTable").DataTable();
      $(".usersTable tbody").on( 'click', 'tr', function () {
        var data = table.row( this ).data();
        $(".id-update").val(data[0]);
        $(".delete-update").attr("href", function(i, origLink) {
          return origLink.replace(/#/, data[0]);
        });
        $(".firstname-update").val(data[1]);
        $(".lastname-update").val(data[2]);
        $(".email-update").val(data[3]);
        $('.role-update').find('option[value=' + data[4] + ']').attr("selected",true);
      });
    });
  </script>
